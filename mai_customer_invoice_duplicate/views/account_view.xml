<?xml version="1.0"?>
<odoo>
	<data>

		<record id="account_move_form_view_ic" model="ir.ui.view">
			<field name="name">account.move.inherit.form.ic</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_move_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='ref']" position="after">
					<field name="copy_invoice" attrs="{'readonly':[('id', '!=', False)], 'invisible':[('copy_invoice', '=', False)]}"/>
				</xpath>  
			</field>
		</record>

		<record id="view_invoice_tree_ic" model="ir.ui.view">
			<field name="name">account.move.inherit.form.ic</field>
			<field name="model">account.move</field>
			<field name="inherit_id" ref="account.view_invoice_tree"/>
			<field name="arch" type="xml">
				<xpath expr="//field[@name='state']" position="after">
					<field name="copy_invoice"/>
				</xpath>  
			</field>
		</record>

        <record id="view_account_invoice_filter_ic" model="ir.ui.view">
            <field name="name">account.move.inherit.search.ic</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_account_invoice_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='due_date']" position="after">
                    <filter name="due_date" string="Remaining Copy Invoice" domain="[('copy_invoice', '=', False)]"/>
                    <filter name="due_date" string="Copied Invoice" domain="[('copy_invoice', '=', True)]"/>
                </xpath>  
            </field>
        </record>

        <!--Account Move lines-->
        <record id="generate_account_move_view" model="ir.ui.view">
            <field name="name">Duplicate Invoice to another company</field>
            <field name="model">generate.account.move</field>
            <field name="arch" type="xml">
                <form string="Delete Entries">
                    <span class="o_form_label">All selected Invoice will be create for selected company!</span>
                    <group col="4">
                        <field name="company_id"/>
                        <field name="state"/>
                    </group>
                    <group col="4" string="Currency">
                        <field name="exchange_currency"/>
                        <field name="user_id" invisible="1"/>
                        <field name="currency_id" attrs="{'invisible': [('exchange_currency', '=', False)], 'required': [('exchange_currency', '=', True)]}"/>
                        <field name="currency_rate" attrs="{'invisible': [('exchange_currency', '=', False)], 'required': [('exchange_currency', '=', True)]}"/>
                    </group>
                    <group string="Taxes">
                        <group>
                            <field name="tax_ids" widget="many2many_tags"/>
                        </group>
                    </group>
                    <group>
                        <field name="invoice_ids" nolabel="1"/>
                    </group>
                    <footer>
                        <button string="Generate" name="generate_move" type="object" default_focus="1" class="btn-primary"/>
                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

        <record id="action_delete_account_move" model="ir.actions.act_window">
            <field name="name">Duplicate Invoice to another company</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">generate.account.move</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="generate_account_move_view"/>
            <field name="groups_id" eval="[(4, ref('mai_customer_invoice_duplicate.group_duplicate_invoice'))]"/>
            <field name="context">{}</field>
            <field name="target">new</field>
            <field name="binding_model_id" ref="account.model_account_move" />
            <field name="binding_view_types">list</field>
        </record>

	</data>
</odoo>
